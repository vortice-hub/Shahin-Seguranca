{% extends 'base.html' %}
{% block content %}
<div class="flex items-center justify-between mb-6">
    <h2 class="text-xl font-bold text-slate-800">Meu Espelho</h2>
    <form action="/ponto/espelho" method="GET" class="flex gap-2">
        <input type="date" name="data_filtro" value="{{ filtro_data }}" class="border border-slate-200 rounded-lg px-2 py-1 text-xs text-slate-600">
        <button type="submit" class="bg-blue-600 text-white px-3 py-1 rounded-lg font-bold text-xs"><i class="fas fa-filter"></i></button>
        {% if filtro_data %}<a href="/ponto/espelho" class="bg-slate-200 text-slate-600 px-3 py-1 rounded-lg font-bold text-xs">X</a>{% endif %}
    </form>
</div>

<div class="space-y-4">
    {% for dia in dias %}
    <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
        <div class="px-4 py-3 bg-slate-50 border-b border-slate-100 flex justify-between items-center">
            <span class="font-bold text-slate-700 text-sm">{{ dia.data.strftime('%d/%m/%Y') }}</span>
            <span class="font-mono text-xs font-bold px-2 py-1 rounded 
                {% if '-' in dia.saldo %} bg-red-100 text-red-700 {% else %} bg-emerald-100 text-emerald-700 {% endif %}">
                Saldo: {{ dia.saldo }}
            </span>
        </div>
        <div class="p-3 grid grid-cols-2 gap-2">
            {% for p in dia.pontos %}
            <div class="flex justify-between p-2 bg-white border border-slate-100 rounded text-xs">
                <span class="text-slate-500 font-bold">{{ p.tipo }}</span>
                <span class="text-blue-600 font-mono font-bold">{{ p.hora_registro.strftime('%H:%M') }}</span>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="text-center py-10 text-slate-400">Sem registros.</div>
    {% endfor %}
</div>
{% endblock %}