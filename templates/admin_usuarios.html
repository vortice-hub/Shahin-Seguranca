{% extends 'base.html' %}
{% block content %}
<div class="flex items-center justify-between mb-6">
    <h2 class="text-lg font-bold text-slate-800">Gestão de Usuários</h2>
    <a href="/" class="text-xs font-bold text-slate-400 hover:text-slate-600">VOLTAR</a>
</div>

{% if senha_gerada %}
<div class="bg-green-100 border border-green-200 text-green-800 p-6 rounded-xl mb-6 text-center">
    <p class="text-sm font-bold uppercase tracking-wide text-green-600 mb-2">Usuário Criado com Sucesso</p>
    <div class="text-lg mb-1">Usuário: <strong>{{ novo_user }}</strong></div>
    <div class="text-2xl font-mono bg-white inline-block px-4 py-2 rounded border border-green-300 shadow-sm mt-2">{{ senha_gerada }}</div>
    <p class="text-xs mt-3 text-green-700">Anote esta senha temporária e entregue ao usuário.<br>Ela será válida apenas para o primeiro login.</p>
</div>
{% endif %}

<div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden mb-8">
    <div class="bg-slate-50 px-6 py-4 border-b border-slate-100 font-bold text-slate-700">Novo Cadastro</div>
    <form action="/admin/usuarios" method="POST" class="p-6 space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div><label class="label-pro">Usuário (Login)</label><input type="text" name="username" class="input-pro" placeholder="ex: joao.silva" required></div>
            <div><label class="label-pro">Nome Completo</label><input type="text" name="real_name" class="input-pro" placeholder="João da Silva" required></div>
        </div>
        <div>
            <label class="label-pro">Função / Cargo</label>
            <select name="role" class="input-pro">
                <option value="Colaborador">Colaborador</option>
                <option value="RH">RH</option>
                <option value="Almoxarife">Almoxarife</option>
                <option value="Master">Master (Admin)</option>
            </select>
        </div>
        <button type="submit" class="w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 rounded-lg">CRIAR USUÁRIO</button>
    </form>
</div>

<div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
    <table class="w-full text-left text-sm text-slate-600">
        <thead class="bg-slate-50 text-xs uppercase text-slate-400 font-bold">
            <tr><th class="px-6 py-3">Nome</th><th class="px-6 py-3">Login</th><th class="px-6 py-3">Função</th><th class="px-6 py-3">Status</th></tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
            {% for u in users %}
            <tr class="hover:bg-slate-50">
                <td class="px-6 py-4 font-medium text-slate-800">{{ u.real_name }}</td>
                <td class="px-6 py-4">{{ u.username }}</td>
                <td class="px-6 py-4"><span class="bg-slate-100 text-slate-600 px-2 py-1 rounded text-xs font-bold">{{ u.role }}</span></td>
                <td class="px-6 py-4">
                    {% if u.is_first_access %}
                    <span class="text-yellow-600 text-xs font-bold"><i class="fas fa-clock"></i> Pendente</span>
                    {% else %}
                    <span class="text-emerald-600 text-xs font-bold"><i class="fas fa-check"></i> Ativo</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>.label-pro { display: block; font-size: 0.7rem; font-weight: 700; color: #64748b; text-transform: uppercase; margin-bottom: 0.5rem; } .input-pro { width: 100%; background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 0.75rem 1rem; }</style>
{% endblock %}