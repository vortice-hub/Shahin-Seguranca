{% extends 'base.html' %}
{% block content %}
<div class="bg-white rounded-lg shadow p-6 mb-6">
    <h2 class="text-lg font-bold mb-4 text-blue-900 border-b pb-2">Novo Item</h2>
    <form action="/adicionar" method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input type="text" name="nome" placeholder="Nome do Item (ex: Camisa Polo)" class="p-3 border rounded w-full" required>
        <div class="flex gap-2">
            <select name="categoria" class="p-3 border rounded w-full">
                <option value="Uniforme">Uniforme</option>
                <option value="EPI">EPI</option>
                <option value="Escritorio">Escrit√≥rio</option>
                <option value="Outros">Outros</option>
            </select>
            <input type="text" name="tamanho" placeholder="Tam." class="p-3 border rounded w-1/4">
        </div>
        <input type="number" name="quantidade" placeholder="Qtd Inicial" class="p-3 border rounded w-full" required>
        <button type="submit" class="bg-green-600 text-white font-bold p-3 rounded hover:bg-green-700 md:col-span-2">
            <i class="fas fa-plus mr-2"></i>Cadastrar
        </button>
    </form>
</div>
<div class="grid grid-cols-1 gap-4">
    {% for item in itens %}
    <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500 flex flex-col">
        <div class="flex justify-between items-start mb-2">
            <div>
                <h3 class="font-bold text-lg">{{ item.nome }}</h3>
                <p class="text-sm text-gray-500">{{ item.categoria }} {% if item.tamanho %}- {{ item.tamanho }}{% endif %}</p>
            </div>
            <div class="text-2xl font-bold {% if item.quantidade < 5 %}text-red-500{% else %}text-blue-600{% endif %}">
                {{ item.quantidade }}
            </div>
        </div>
        <div class="mt-2 pt-2 border-t flex items-center justify-between">
            <form action="/atualizar/{{ item.id }}" method="POST" class="flex items-center gap-2">
                <button type="submit" name="operacao" value="saida" class="bg-red-100 text-red-600 p-2 rounded hover:bg-red-200"><i class="fas fa-minus"></i></button>
                <input type="number" name="quantidade_mov" value="1" min="1" class="w-12 text-center border rounded p-1">
                <button type="submit" name="operacao" value="entrada" class="bg-green-100 text-green-600 p-2 rounded hover:bg-green-200"><i class="fas fa-plus"></i></button>
            </form>
            <a href="/deletar/{{ item.id }}" class="text-gray-400 hover:text-red-500" onclick="return confirm('Tem certeza?')"><i class="fas fa-trash"></i></a>
        </div>
    </div>
    {% else %}
    <p class="text-center text-gray-500 py-10">Nenhum item no estoque.</p>
    {% endfor %}
</div>
{% endblock %}